# 基于vue.js的C2B电商平台的设计与实现



## 摘要

​		随着电子商务的稳步发展，电子商务逐渐成为社会消费的重要组成部分。传统的B2B、B2C和C2C模式已经不能够满足广大消费者复杂多变的个性化需求，为满足消费者的这种需求，电子商务C2B模式运营而生。但市面上却少有专注于能可定制商品、以用户需求为核心提供多重定制化服务的C2B电商平台。
​		针对上述问题，通过对相关技术和C2B电子商务平台的研究与分析，本文设计并实现了一款基于Vue的C2B电子商务平台，以便有相关商品定制的消费者可以方便快捷的完成定制产品的需求提交与购买。让企业经营链条更加畅通，在企业经营模式上的创新具有跨越式的意义。

​		With the steady development of e-commerce, e-commerce has gradually become an important part of social consumption. The traditional B2B, B2C, and C2C models can no longer meet the complex and varied individual needs of consumers. To meet this demand of consumers, the e-commerce C2B model was born. However, there are few C2B e-commerce platforms on the market that focus on customizable products and provide multiple customized services based on user needs.
​		In view of the above problems, through the research and analysis of related technologies and C2B e-commerce platforms, this article designs and implements a Vue-based C2B e-commerce platform, so that consumers with customized products can quickly and easily complete customized products. Demand submission and purchase. To make the business chain of the enterprise more smooth, innovation in the business model of the business has a leap-forward significance.

​		关键词：单页应用  Vue.js框架  MVVM设计模式  C2B电商

​		KEY WORDS：Single page application    Vue.js framework    MVVM design pattern     Customers to Business


## 1  绪论

### 1.1 研究的背景

​		在电子商务发展发面，纵观我国电子商务行业的格局，主要的采用三种模式：一是 B2B（Business to Business）模式，以阿里巴巴为代表，是一种企业对企业的电子商务，即企业与企业之间通过互联网进行产品、服务及信息的交换。二是B2C（Business to Customer）模式，以天猫为代表，是企业对消费者的一种电子商务模式，即企业厂商直接将产品或服务推上网络，并提供充足资讯与便利的接口吸引消费者选购。三是C2C（Consumer to Consumer）模式，以淘宝为代表，是一种消费者对消费者的电子商务，是消费者之间的互动交易行为。近年来C2B模式理念逐渐引入到电子商务企业中，不同的人群，有不同的消费能力，有不同的消费需求，如何让消费者的个性化需求得以满足是C2B模式的核心。
​		在技术层面，随着技术的不断更新发展，web应用的开发模式也在不断革新。以往的前端与后端过于耦合，在不同的平台及设备上开发同样的应用显得业务逻辑过于复杂且展现逻辑混乱。发展到今天，前后端分离已经是大势所趋，方便开发人员进行便捷开发的框架层出不穷，Vue.js便是一套自底向上，只关注视图层，让开发人员专注于构建用户界面的渐进式框架。
​		本文研究的C2B电子商务平台将采用前后端完全分离的开发模式，彻底解耦，前端开发人员无需写任何后端的代码，只需在前端部分调用后台接口即可，本文主要研究平台的前端部分。

### 1.2 发展现状

#### 1.2.1 前端技术发展现状

​		前端技术层面，早期通过ASP、JSP模版语言加上简单的JavaScript建立购物网 站。到2005年出现Ajax，实现异步通信，到后来为了实现浏览器兼容出现了jQuery。 随着 JavaScript 的复杂度增长，前后端发生分离，纯静态的 html 模版放在前端，数据通过RESTful接口交互。之后，随着业务的进一步复杂，前端也需要分层架构， 使得系统各层之间时松散耦合的，比较具有代表的是MVVM设计模式。近年，在分层架构的基础上又加入了模块化思想。现在市面上比较流行的前端技术选型是Vuejs、Reactjs 和 Angularjs。当前，天猫超市使用Nodejs 替换掉了之前的PHP语言，用于前端渲染。京东使用根据自身业务开发的Nerv框架，这是一款类React的前端框架。

#### 1.2.2 框架技术研究进展

​		Vue.js 是最近两年诞生的一款非常优秀的轻量级前端框架，它只聚焦视图层， 是一个构建数据驱动的Web界面的库。它通过简易的 API（应用程序编程接口）能够实现高效的数据绑定、提供灵活的组件系统。Vue.js 的特性有：轻量级的框架、双 向数据绑定、指令、插件化。Vue.js的数据是基于依赖追踪系统，异步队列等待，数据独立。Vue.js与React 有很多相似之处， 都是数据驱动的理念，组件之间可以组合。两者不同点在于内部实现本质。React是基于虚拟DOM的渲染，这种渲染是将数据保存在内存中。只有状态改变，DOM将会重新被渲染，然后将变化的部分通过补丁的方式加载到 DOM 节点上。这种方式不是每次都渲染整个页面，一旦有数据改动，DOM才会被再次渲染，优化性能的同时还保证视图和数据的一致性。Vue.js 操作的则是真正的DOM，它使用真正的DOM作为模板，数据也是绑定到真实的节点上，而 Vue.js这种方式要比React的虚拟DOM的性能要好一些。

#### 1.2.3 前端工程化趋势

​		Web业务日益复杂化和多元化，前端开发已经由以WebPage模式为主转变为以WebApp模式为主了。现在随便找个前端项目，都已经不是过去的拼个页面+搞几个jQuery插件就能完成的了。工程复杂了就会产生许多问题，比如：如何进行高效的多人协作？如何保证项目的可维护性？如何提高项目的开发质量？这些是前端工程化的原由，后续“关键技术”章节将会对这种“分治”思想是如何实现的进行介绍。
​		在前端工程程化中，开发者最重要的基本素养就是通过工具提升效率，前端开发者在这些工具下会持续迭代和优化。在未来，前端工程体系一定会更加闭环，不再是一个脚手架这么简单，而是会结合IDE，打通业务属性，从项目初始化、到编写代码、到发布形成一个完成的闭环。

### 1.3平台研发目标

​		近年C2B模式理念也逐渐引进到电子商务企业中——怎么让不同人群的人，不同消费能力的人，不同品牌偏好的人买到他希望买到的产品，这种个性化的方向将会成为未来网络营销的核心，而实现个性化的方法就是切实推行好电子商务的C2B 模式。而本文的研发目标是设计与开发一套基于MVVM设计模式的C2B电子商城的前端部分开发。该平台封装了C2B电商模式常见的个性化购物需求的常用模块，使用方可以快速的更新管理平台内容，而不用花大量时间和金钱去维护系统。不断地进行商城的更新迭代、模块升级、优化，这样可以进一步更好的帮助、支持使用该系统的用户。

### 1.4论文组织结构

​		本文前端采用Vue.js框架，服务器端使用Node.js完成C2B电商平台的开发。按照目录结构主要研究内容如下：
​		第一章为绪论，通过电子商务的发展阐述了C2B模式出现的背景和意义。通过研究研究国内发展现状，表明设计实现C2B电商平台价值和技术选型选择Vue.js的可执行性。
​		第二章重点介绍了前端的主要技术，通过对技术的分析与描述，表明技术选型的原因及其优势所在。
​		第三章为平台的分析与设计，阐述系统的设计模式和功能需求，功能需求按照系统的模块结构讲述。
​		第四章从各个功能模块出发，按照平台的设计结合代码和业务逻辑流程图简明平台的棘突实现，并展示平台的实现效果图。
​		第五章为平台的测试，测试各个模块的功能是否实现，并展示测试结构。
​		第六章总结全文，列出本文研究过程中的一些心得，同时阐明设计的一些不足同时提出对并平台的展望。

## 2  关键技术

### 2.1 前端开发语言

#### 2.1.1 JavaScript 技术

​		JavaScript是一种弱类型的脚本语言，JavaScript解释器作为浏览器的一部分， 也叫JavaScript引擎。JavaScript最开始是为了实现HTML页面动态展示效果，随着技术的发展，它的功能也在不断增强，现在的Node.js都可以开发服务器端了。 JavaScript 主要包含三个部分：ECMAScript、文档对象模型和浏览器对象模型。 他有如下特点：
​		（1）JavaScript是解释性脚本语言，使用它编写的代码不需要进行预编译，只需嵌入到HTML代码中，然后由浏览器逐行加载解释执行即可。 
​		（2）JavaScript是一种基于对象的语言，它和面向对象的语言不同，它不支持继承和重载。它是需要有一个抽象的对象描述，然后在此基础上构建具体对象。 
​		（3）语言使用起来比较简单，弱类型，与 C 语言、Java 语法相似，变量不需要 指定具体类型即可使用。 
​		（4）JavaScript最开始是为了给 HTML 页面添加动态效果的，所以动态性则是它最基本的一个特点。 
​		（5）运行环境通常是浏览器，只需要浏览器支持JavaScript即可。否则，那么浏览器会忽略掉这些JavaScript代码。

#### 2.1.2 HTML5 技术

​		HTML5是一门由万维网在 2014 年（W3C）为了满足当代网络需求而重新修订 的超文本标记语言。它在上一个版本的基础上添加了许多新的功能特性，使开发者能够更容易的在网页中添加、处理多媒体和图片内容。添加了帮助了解整体页面的大体布局分布的语义化标签，例如<section>、<header>和<nav>等标签。此外，还有音频、视频、画布，另外还将SVG的内容继承了下来。同样也去掉了一些不合理的属性和元素，且API、DOM 已经成为HTML5的基础组成部分。

#### 2.1.3 CSS3 技术

​		当前 Web 网页想要有一个很好的用户体验，必不可少的就是网页拥有丰富多彩的网页样式，CSS就是为此诞生的。 
​		CSS（层叠样式表）是一门为结构化文档添加样式的计算机语言。它的最新版本为CSS3，由 W3C组织在2001年起草的。它在原来版本的基础上添加了一些新的特性。如边框特性、多背景图、颜色与透明度、多列布局与弹性盒模型布局、过渡与动画等。
​		此外，在CSS的基础上出现对CSS的拓展。Less（及其他CSS预处理器，例如Sass）能帮助开发人员编写易于维护的样式代码。Less的一些关键功能：
​		（1）@：变量
​		Less支持将一个CSS值（如一个颜色值）保存到变量中。使用“@”符号来创建一个变量

```css
@primary-color: #A3A4FF;
@secondary-color: #51527F;
@body-font: 'Roboto', sans-serif;

/* 你可以在你的样式文件中全局引用变量。
现在假如要修改颜色，只需修改一次即可。*/

body {
	background-color: @primary-color;
	color: @secondary-color;
	font-family: @body-font;
}
```

​		（2）嵌套
​		Less允许在选择器中嵌套选择器

```css
//一个三层的选择器嵌套
ul {
	list-style-type: none;
	margin-top: 2em;

	li {
		background-color: red;

		&:hover {
		  background-color: blue;
		}

		a {
		  color: white;
		}
	}
}
```

​		Less的出现让开发人员在编写样式时效率大大提高，同时在项目最终发布时，Less最终会编译成标准的CSS代码，与所有主流浏览器实现兼容。

### 2.2 MVVM 框架开发模式

#### 2.2.1 前后端分离意义

​		单页应用SPA（Single Page Application）是前后端分离的一个典型案例。例如虾米音乐的网页版，就是一个单页应用，单页应用的主要特征就是网页的内容是局部刷新的，网页的组件通过控制路由去调用AJAX，后台只需要提供接口即可实现。单页应用的主要优势就是用户体验更好，传统网页需要一次请求一次刷新，单页应用不再需要刷新整个页面，因此整个网页的访问速度也得到了改善。
​		因此，此项目前后端分离能让我们更专注于前端层面的设计，此项目后台数据使用浏览器自带的localstorage，无需关注后端部分。
​		前后端分离的意义：
​		（1）工作职责更明细、效率更高
​		这种开发模式让开发人员可以各司其责，同时又可有并行开发，前后端的开发人员了解相互的业务逻辑的情况下，将会大大减低沟通成本。前端不再需要等待后台提供的模板或是与后端代码的耦合、混杂，甚至无需等待后端的接口前端也能无障碍开发，前端通过模拟数据也可进行开发。
​		（2）性能提升
​		通Vue-router配置路由，实现按需加载。又因前端页面不依赖服务器的解析，直接获取快速加载，在用户体验度上将会有明显的提升。
​		（3）提高代码复用率
​		清晰的项目结构，工程化的思维，没有后端部分的干扰，后续的开发将具有极高的可维护性。增删功能或模块将变得更便携，不再需要单个网页、单个板块一一修改，只需修改模板或组件即可。

#### 2.2.2 MVVM开发模式优势

​		在介绍MVVM（Model–view–viewmodel）设计模式前得先了解另一个设计模式：MVC（Model-View-Controller）。这种设计模式分离了视图层和模型层，但把除Model、View以外的所有东西都塞进了Controller里。Controller要负责显示界面、响应DOM操作、网络请求及与Model的交互。随着业务逻辑的增加，项目的扩大，MVC模式变得难以维护。因此便出现MVVM模式。
​		MVVM（Model-View-ViewModel）：其中的M和V分别对应MVC的M和V，VM（ViewModel）则是把MVC里的Controller的数据加载，加工功能分离出来。

<img src="E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\图2-1--MVVM模式1.png" alt="图2-1--MVVM模式1" style="zoom:67%;" />

MVVM这一数据驱动视图的模式其根本目的和MVC一样，为了分离视图层（View）和模型层（Model），使Model的变化与修改和View独立开来，一个ViewModel可以绑定到不同的View上，View变化时Model可以不变，Model变化时View也可以不变。
			MVVM设计模式的优点：
		（1）便于调试，在以往的MVC下，因为Controller部分的逻辑过于混杂，Controller几乎是无法测试的，并且分散在不同的地方，没有明确的目录结构。而在MVVM模式下我们可以测试里面的ViewModel，可以很方便的按模块测试我们的处理结构正确与否。
		（2）便于代码的移植，在不同平台不同终端上跑的项目也许除了交互页面有所不同，大部分业务逻辑都是一致的这种场景。采用MVVM模式去开发，就能够以很小的代价去开发另一个平台的项目。大大降低了以往开发人员开发其他平台相同应用时所需要做的重复工作。
		（3）向下兼容MVC，MVVM实际就是MVC的一个升级版，以往使用MVC模式开发的项目，Model部分依旧可以保留，重构VC部分即可实现项目的重建更新。
		不管是MVC还是MVVM等架构模式都是为了分离项目的模型层和视图层从而提高开发人员的开发效率和提高整个项目的可维护性而提出来的软件架构模式。而它们之间的差异也只是在于各个模块之间的耦合程度或是不同的研发关注点。并没有完美的架构模式，MVVM也并没有完全取代MVC模式，了解不同架构的优缺点可以帮助我们在不同的业务需求之间选择合适的软件架构模式。

### 2.3 ES6标准

​		ES6（ECMAScript 6 / ECMAScript 2015）是JavaScript的一个标准，从1.0版本发展至今，逐渐趋于规范，变得更加严格。无论是用let和const声明去替代var、module导出与import的导入、还是简化函数结构使用箭头函数等，都是前端代码标准化和为前端工程化的提现。ES6的新语法特性让前端和后端的差异越来越小了，这是一个新时代的开始，我们必须要了解这些新的前沿知识，才能跟上时代的步伐。

### 2.4 Vue.js前端开发框架

#### 2.4.1 Vue.js的模块化

​		在过去，JavaScript是无法像其他后端语音一样将程序分解，分模开发在组合。很多语言都是支持这种功能的，就像Python的import语法引入文件。但JavaScript不支持，这是这门语言设计者的初衷没有估计到的问题，原来的JavaScript只需要简单的为网页执行一些脚本就完成了所有的使命。到了今天，开发大型的、复杂的web项目时，开发人员面临很大的困难。
​		于是，前端也开始支持模块化了。在ECMAScript 6之前，主要通过CommonJS和AMD这两种方案来实现前端模块化。CommonJS在服务器端，AMD在用户终端。如今，正如2.3提到的ES6标准，JavaScript已经得到原生模块化的支持。通过import导入，通过export导出。
​		Vue.js支持最新的ES6规范，因此，很好的支持了前端模块化，让开发人员使用Vue.js时可以用上模块化、工程化的思维去开发。

#### 2.4.2 Vue.js 的组件化

​		Vue的作者尤雨溪曾为AngularJs工作，他本人称Vue保留了AngularJS中自己喜欢的一部分。充分吸收了巨人的优点，其最大的一个特点就是组件化，组件化不光让整个项目更加有条理，还让HTML、CSS、JavaScript可以写在同一个文件里，代码的可读性、可维护性大大提高。组件化的核心思想就是分而治之，合理的组件化，能够让整个项目表现出低耦合高内聚的特点，这些都是便于开发人员日常开发的。其具体优点有：
​		（1）组件之间相互独立互不影响，便于开发人员debug，测试过程中能很快的找到问题源。
​		（2）组件化使得项目有极高的可读性和清晰的结构关系，能让二次开发时快速了解整个项目，组件与组件之间的关系一目了然。
​		（3）拓展性提高，面对新增功能和需求变更，一直都是领开发人员头疼的事。组件化是系统的伸展性得以提高，让项目的构建过程变得像搭积木，可以方便的拆除和增添模块。
​		（4）组件服用，以往的web开发，面对导航栏这类重复的部件，只能每个页面都写上一遍代码。组件化让组件能够复用，写重复的代码时间得以减少，开发效率得以提升。

#### 2.4.3 Vue.js的响应式数据双向绑定

​		Vue.js最核心的内容就是“数据驱动视图”，其内容就是响应式数据双向绑定。
​		响应式数据双向绑定是指数据模型与视图显示数据的实时同步更新。通过Vue.js的v-model，对数据的修改不再需要像操作数据库一样进行增、删、改、查了。在用户输入端输入的数据，可以实时的与数据模型进行同步。同样，数据模型所修改的数据也可以同步更新到视图层。例如在用户提交from表单这个场景下，用户只要输入数据，用户就已经将数据保存到数据模型中去了。

#### 2.4.4 Vue.js的路由功能

​		Vue.js拥有自己的路由功能：vue-router。在构建单页应用时，不同的组件合并成为一个页面，若想加入其他的业务模块时，必须在路由中配置该业务的模块，才能通过路由的方法实现跳转。以下是一个路由配置文件示例

```html
<div>
    //路由页面渲染在router-view标签内
    <router-view></router-view>
</div>
```

```js
import Vue from 'vue';
import Router from 'vue-router';

Vue.use(Router);

const routes = [
  {
    path: '*',
    redirect: '/home'
  },
  {
    name: 'home',
    component: () => import('../page/index'),
    meta: {
      title: '首页'
    }
  },
    
    
  ...
  ]
```

```js
var router = new VueRouter({
    routes:routes,
});
//把上面的路由定义声明定义
```

```js
var app = new Vue({
        el:'#main',
        route:router,
)}
```

### 2.5 Vant组件库

​		Vant是一个基于Vue.js的移动端组件库。通过使用Vant组件库，可以快速构建风格统一的页面，提高开发效率。同时Vant组件库的UI风格非常适用于构建移动商城。该库基础组件齐全，且质量较高，同时支持最新的ES6语法，还拥有详尽的开发文档。Vant的社区活跃，有60多个个组件，90%多的单元测试覆盖率，完善的文档和示例，支持 babel-plugin-import，支持TypeScript。这些特性都非常适合此项目的开发

### 2.6 Webpack构建工具

​		前面所提到的前端模块化、工程化开发都是跑在本地服务器上。最终上线的web应用还需要打包（Module Loader）工具打包发布。webpack是目前最火热的前端项目打包工具。通过配置文件，它能够自动整理项目中所有的文件的依赖关系，同时还能实现资源的按需加载。还能将本属于服务器端的语法转换为浏览器可识别的格式。其工作模式如图 2-2。

![图2-2--webpack1](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\图2-2--webpack1.png)

### 2. 本章小结

​		本章主要是对本文课题所使用的技术作出详细介绍。先是介绍了开发平台所使用的前端三大编程语言JavaScript、HTML5和CSS3，然后重点介绍了MVVM开发模式与 Vue.js 前端框架，这两者成功实现了前后端分离与代码的解耦。最后依次介绍了Vant前端开发组件、ES6标准与Webpack构建工具相关技术与知识。

## 3  系统分析与设计

### 3.1 需求分析

#### 3.1.1 功能性需求分析

​		由于消费者的需求不同，C2B又可以细分为很多类型，本文设计和研究的主要为基于消费者需求差异性的C2B电子商务模式。结合已有电子商务平台的业务分析，本系统的功能需求主要包括登录注册模块、购物车模块、商品模块、个人中心模块等。系统整体用例图 3-1。

![整体用例图白底](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\系统整体用例图.jpg)

（1）登录注册模块
用户未登录时，拥有游客的权限只能浏览商品信息无法进行下单等操作。用户进行登录操作后，若登录成功，系统将给用户授权。用户可查看和操作收藏架和购物车以及下单。若系统查询到该账号不存在，则需进行注册操作。用户注册时填写 用户名和密码后验证用户名已经注册过则注册失败，否则注册成功即可成功登录。
（2）商品模块
商品模块的内容游客可以访问，但无法进一步购买，点击购买会弹出登录注册界面
（3）购物车模块
购物车模块和实际生活中的购物车功能类似主要用于展示用户添加到购物车的商品信息。用户可编辑某商品数量也可将商品单个或批量移出购物车。用户通过全选或者勾选指定商品购物车可对选中的商品自动进行合计，用户点击提交订单可进 入到订单模块。
（4）支付模块
订单模块展示用户购买的商品信息。用户需要在该页面确认订单信息，包括收货地址信息、购买商品数量和金额等。用户可对收货地址进行编辑、新增、设置默认地址，并选择其中 一个作为当前定订单的收货地址。用户确认所有信息无误后点击去付款按钮，页面跳转到选择支付方式的页面。
（5）个人中心模块
个人中心模块主要包含我的订单、我的资料、我的收藏、我的地址等模块。 

#### 3.1.2 非功能性需求分析

（1）可靠性 
		此C2B商城最终要部署面向全网用户要求系统需要保证24小时不间断的持续服务。这是因为任何形式的暂停服务都会给用户带去不良的使用体验，造成不可预期的经济损失。当线上出现bug时需要及时解决以保证系统正常运行。 
（2）易用性 
		易用性注重用户体验即是一种以使用者为中心的设计概念，好的用户体验能直 接给企业带来直观的收益。本系统的易用性主要包含良好的视觉设计、高性能两个部分。 
		① 视觉设计系统的整体主题色彩要一致，色彩搭配突出重点信息。页面布局符合用户习惯， 保持页面条理清晰，引导用户消费。 
		② 高性能在满足基本的用户需求情况下，高性能是系统流行的必要条件。对用户体验影响极大的一个因素是页面的访问速度。开发过程中，应考虑精简代码、减少发起http请求个数、减少http请求大小、缓存静态资源来提升系统性能。 

### 3.2 平台设计原则

（1）以目标用户为主
		任何设计都是基于目标用户的需求而设计的，其目的是为用户解决需求的同时提供更高的价值。所以在进行系统设计的时候，要明确目标用户的需求，为商城真正的目标用户设计，通过解决用户的核心需求和使用体验需求，给用户获得更高的价值。

（2）为核心需求设计
		所以我们在进行网上购物系统开发的时候，在满足核心功能的条件下，界面信息、功能流程、交互样式等越简单越好。人的天性都是懒惰的，大量数据表明当用户对产品的使用流程超过三步还未解决用户需求的时候，用户对产品的使用情绪就会产生恶化。所以越简单、越易懂的设计才是用户最喜欢的。因此本系统将尽量以直观的交互和设计去打造此C2B商城的个性化定制和礼品卡功能。

#### 3.2.2 组件化和模块化

### 3.3 前端架构设计

![前端架构设计](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\前端架构设计.jpg)

​		系统从三个层级构建的的整体架构图如图所示。本系统前端使用到的技术架 构为 vue、vue-router、webpack、es6、less。前端表现层 view 指各个业务页面， component 为通用组件。router 指前端路由 vue-router。 service 业务层负责处理从服务器响应的数据。API 层封装了系统的全部请求。

### 3.4 功能模块设计

​		本系统的功能模块主要包含登录注册、个性定制模块、礼品卡模块、订单支付模块、购物车模块和个人中心模块。本节将对几个重要模块进行介绍。总体结构如图所示。

![C2B电商平台系统功能设计](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\C2B电商平台系统功能设计.jpg)

#### 3.4.1 个性定制模块功能设计

​		个性定制模块是本C2B的核心模块。此模块包含对商品的有关操作，主要包括浏览、分类浏览、搜索商品功能。

![搜索流程图](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\搜索流程图.jpg)

​		商品搜索具体流程如图所示，若匹配不到商品则提示搜索失败信息，若匹配成功则将搜索历史添加到本地再展示搜索结果。点击某个具体商品项即可前跳转到商品详情页查看详细信息。

#### 3.4.2 礼品卡功能设计

​		

#### 3.4.3 用户中心功能设计

​		个人中心主要包含我的订单、我的资料、我的地址、账号管理几个模块，每个模块都是一个单独的页面。 我的订单是管理用户下单成功的订单信息。以列表的形式展示订单，用户可上下滚动查看历史订单。每个订单的展示包括订单流水号、订单商品信息、 商品数量、实付金额、订单状态。
​		我的资料管理用户个人身份相关信息，包含用户头像、用户名、手机号、性别、生日等。用户可对除用户名以外信息进行编辑修改。该模块同时提供“退出当前帐号”按钮，用户点击即可注销当前帐号。

![地址管理](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\地址管理.jpg)

​		我的地址用于管理用户的常用收货地址，查看收货地址的前置条件是用户为登 录状态。如图所示收货地址的管理主要包含设置默认地址、编辑地址、新增地址、 删除地址。单个收货地址信息主要包含收货人联系方式、姓名和收货人详细地址。 设置默认地址后，新订单都会默认选中该地址作为收货地址，用户也可更改默认地址。

### 3.5 本章小结

​		本章以功能性需求从模块角度出发，阐述了每个模块预期完成的主要功能，主要 对系统的需求做了详细的分析。非功能性需求从可靠性、易用性几个方面出发，进一步提高了系统质量要求。还以需求分析为基础，对商城做出了详细设计。首先讲述了本系统的整体前端架构并按照整体架构设计了项目的目录结构。接着从功能设计角度出发，详细解释了各个模块的具体功能设计和业务逻辑流程。本章节是后续系统设计章节的建设依据。

## 4  具体实现

### 4.1 开发环境

​		（1）硬件环境：

| 硬件环境 | 描述           |
| -------- | ------------------------ |
| 处理器   | Intel(R)Core(TM) i7-6700HQ @ 2.60GHz |
| 操作系统 | Windows 10                 |
| 内存 | 16Gb 1600MHz DDR3L             |

​		（2）软件环境：

| 软件环境 | 描述    |
| -------- | ---------- |
| 开发语言   | JavaScript |
| 前端开发框架 | Vue.js          |
| 代码编辑器 | WebStorm 2019.3.1         |
| 浏览器 | Google Chrome 80.0.3987.132     |
| 依赖管理 | NPM |
| 构建打包 | Webpack |

​		此外，Vue.js作为一种前端框架，在创建新项目时需要搭配项目构建工具Webpack，而Webpack在执行时需要依赖node.js环境，npm同理。node.js安装完毕后自带npm工具，由于国内访问国外的npm包速度较慢，因此，在此项目中我们使用cnpm，一个淘宝建立的npm国内镜像站点。

#### 4.1.1 运行环境

​		由于本系统运行主要是在本地进行研发与测试，并未发布在服务器上，因此系统的运行环境的硬件环境和软件环境和开发环境相同，这里不再赘述。

#### 4.1.2 项目框架搭建

​		新项目的创建可以使用Vue.js自带的脚手架vue-cli，通过vue-cli可以自动生成Vue.js并搭配了Webpack的项目模板。以下是安装vue-cli执行命令：

```
cnpm install -g vue-cli
```

​		再通过以下命令构建项目，项目命名为c2b-frontend-core，并把后续需要使用的Vant库安装了:

```
vue init webpack-simple c2b-frontend-core
cnpm install vant-S
```

​		至此，项目已经成功构建，项目目录如图。其中会生成一个名为node_modules的文件夹，这个文件夹用于存储所有的依赖文件。

<img src="E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-10 144959.png" alt="批注 2020-03-10 144959" style="zoom:150%;" />
	

​		最后，在编译器自带的终端输入以下命令验证是否构建成功。

```
npm run serve
```

​		若出现如图所示，则项目环境搭建和项目构建成功。

![批注 2020-03-10 145607](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-10 145607.png)

​		最后，进入Chrome访问localhost：8080即可查看如图所示构建成功的页面。

![批注 2020-03-10 163247](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-10 163247.png)



### 4.2 通用组件

​		无论是Vue.js，还是React、Angular等这些近几年兴起的前端框架，他们都有一个共同的特点，那就是模块化和组件化，这样做的目的上文已经提到过，使代码能够复用，提高开发效率，使项目易于维护、易于拓展等。
​		即便今天，使用前端三大语言HTML、CSS、JavaScript想要开发出功能完备、访问无问题的web网站是完全可以的。但随着时间的流逝，网站的功能会变得越来越复杂，变得难以修改和维护。现如今，通过组件化开发多大的web应用都将不是问题。

| 组件名称 | 简介 |
| --- | --- |
| Button | 按钮 |
| Form | 表单 |
| Search | 搜索 |
| Stepper | 步进器 |
| Toast | 轻提示 |
| SwipeItem | 轮播 |
| Sidebar | 侧边栏 |
| AddressEdit | 地址编辑 |
| Card | 商品卡片 |
| SinmitBar | 提交订单栏 |
| Lazyload | 懒加载 |
| NavBar | 导航栏 |

### 4.3 开发平台功能模块实现

​		本节将就项目中几个关键模块的实现步骤进行逐步介绍。项目的总体的页面与组件关系如图。

![页面与组件关系图](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\页面与组件关系图.jpg)

#### 4.3.1 首页实现

​		如图，系统的首页包含了底部导航栏（navigate），首页广告轮播图及细分目录的产品展示。导航栏导向四个模块，非别为首页、定制化产品、礼品卡、个人中心。其中，首页可拓展空间暂将数据写死，未来这部分可根据平台使用方自定义添加自己想要的初始化内容。

![批注 2020-03-11 171302](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-11 171302.png)

​		以下代码为首页page.vue组件的结构，page.vue的内容又由两个自定义组件imageAd和search组成，此时便可以提现组件化开发的优点了，面对后期不可预测多变的需求，只需在page.vue中继续添加组件即可。同时，若想删除或更改目前主页的内容，只需进入子组件imageAd做出相应的改动即可。互不干扰，相互独立，便是组件化特点。

```html
<template>
<div :style="'background-color:'+((page.BackgroundColor==undefined||page.BackgroundColor=='')?'#fff':page.BackgroundColor)">
    <div :style="'height:'+topheight+'px'" ></div>
    <div v-for="(item,index) in page.Sections" :key="index">
        <imageAd v-if="item.Code=='ImageAd'" :data="item.ParameterDictionary"></imageAd>
        <search v-if="item.Code=='Search'" :data="item.ParameterDictionary" v-on:settopheight="settopheight($event)" ></search>
    </div>
</div>
</template>
```



#### 4.3.2 个性定制模块实现

​		如图，个性定制模块首页主要由Vant的搜索组件Search、导航组件Badge以及内容区Content组成。

![批注 2020-03-13 192015](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-13 192015.png)

​		van-search 中，v-model 用于控制搜索框中的文字。background 可以自定义搜索框外部背景色。监听对应事件van-search 提供了 search 和 cancel 事件。search 事件在用户点击键盘上的 搜索/回车 按钮触发。cancel 事件在用户点击搜索框右侧取消按钮时触发。

```html
        <van-search
        v-model="value"
        placeholder="请输入搜索关键词"
        show-action
        @search="onSearch"
        >
        <div slot="action" @click="onSearch">搜索</div>
        </van-search>
```

​		Vant的Badge徽章组件可以理解为一个Table选项卡，通过Badge可以在单页显示众多分栏，让多个页面的内容量全部压缩到一个页面。通过在van-badge-group中设置active-key属性来控制当前选中的badge。同时通过Vue.js自带的v-if来控制选中badge时所显示的Content。

```html
 <van-badge-group :active-key="activeKey" class="tab" :style="'height:'+fullHeight+'px'">
    <van-badge title="热门推荐"  @click="onClick" />
    <van-badge title="定制文具"  @click="onClick" />
    <van-badge title="定制饮品"  @click="onClick" />
    <van-badge title="校园IP"  @click="onClick" />
</van-badge-group>
```

```html
//分别对应三个badge板块
<div class="content" v-if="showPage[0]" >
...</div>
<div class="content" v-if="showPage[1]" >
...</div>
<div class="content" v-if="showPage[2]" >
...</div>
<div class="content" v-if="showPage[3]" >
...</div>
```





#### 4.3.3 礼品卡模块实现

#### 4.3.4 用户中心模块实现

​		用户中心包含个人资料、订单分类管理栏、收货地址管理、账号切换，如图所示。进入用户中心时会调用GetUserIndex()方法获取信息，用户信息包含UserName用户名称、Avatar用户头像、UnpayTotal待支付红色圆标信息、UnrecieveTotal待收货红色圆标信息及AftersaleTotal售后红色圆标信息。

![批注 2020-03-13 182252](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-13 182252.png)

​		收货地址在 created()阶段请求用户全部地址。点击进入收货地址页面如图所示。点击“新增地址”，路由到/user/address/edit地址编辑页，填写完新地址信息后点击“保存”。此时， 调用 onAdd()方法。点击单个地址栏，进入到地址 编辑页，将地址信息传递给编辑组件修改后保存，调用 onEdit()方法，数据库更 新地址信息。其中地址编辑部分用到的是Vant的van-address-edit地址编辑组件，van-address-edit内置省市区三级联动地址选择，与Popup弹出层组件配合使用，达到如图效果。

![批注 2020-03-13 184626](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-13 184626.png)

![批注 2020-03-13 184528](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-13 184528.png)

### 4.4 C2B电商平台的可行性与创新性

#### 4.4.1 C2B电商平台的经济和技术可行性分析

#### 4.4.2 平台的创新点

（1）引入 MVVM 开发模式，采用前后端分离开发方案，实现前后端解耦，代码易维护。选用 Vue.js 前端框架，使系统前端性能得到保障。加之 Vant UI 组件， 系统前端界面风格简洁美观。 
（2）结合用户需求开发自定义组件，用户不用自己花时间在开发需要的组件上。 如果去别处借鉴，那样既降低了开发效率，不统一的组件风格也影响系统用户体验， 降低系统的稳定性。 
（3）框架使用简单，只需引用即可拥有框架所有功能。用户接受起来比较容易， 学习成本较低。开发者只需专注于所需增删的板块，这样有效地降低了系统开发难度，也提高了开发效率。

#### 4.5 本章小结

​		本章基于第三章的设计，实现了基于 Vue.js 框架的常见板块及个性定制、礼品卡、用户中心等功能。首先讲解关键技术的实现，包含Vant的关键组件说明。接着按照功能模块， 详细描述了各个功能的实现逻辑并展示了页面效果实现图。

## 5  测试与验证

### 5.1 功能测试

### 5.2 兼容性测试

​		本系统采用 Chrome 浏览器的设备模式测试系统在各个移动设备上的兼容性。测试的机型包括 Galaxy Note 系列、iPhone5、iPhone6/7/8、iPhone X。测试结果均正确展示，以下对比图是在 iPhone SE (320 * 568) 和 iPhone6/7/8 (414 * 736) 的首页效果。

![批注 2020-03-13 010408](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-13 010408.png)

### 5.3 性能测试

​		前端页面响应速度有几个关键的指标，即渲染时间、每一帧时间、总下载时间。 本设计的性能测试，使用了 Chrome Devtool 工具，通过插件的录制功能得到的性能分析图。

![批注 2020-03-13 011709](E:\1-Work and study\本科论文\基于vue.js的c2b电商平台的设计与实现\论文图片\批注 2020-03-13 011709.png)

​		图最上方的绿色色柱为每个页面的fps，即帧率，可以看出基本都是顶慢的60帧，表示页面没有卡顿。fps下方的橙色曲线为CPU占用率，整体占用率都很低。最下方的扇形图我们可以看到整个页面的初次渲染时长为428毫秒。所以系统的整体的耗时较低，性能较高。

## 6  总结与展望

### 6.1 全文总结

​		本文使用前端的热门渐进式框架Vue.js完成了对C2B电子商务平台的设计与实现。目的是为新兴的C2B电商模式开辟一种可执行的低成本构建商场方案。前期从对电子商务模式的发展调研，及技术选型和系统分析。根据调研结果结合开发技术确定了明细的系统设计。
​		具体工作如下：
​		（1）通过对试下热门的前端技术进行调查，及热门平台所使用的的前端框架进行调查。根据调查结果对比技术框架的优势劣势，选定Vue.js为最终的技术体系基石。以此研究学习技术体系，搭建平台基础框架。
​		（2）页面设计方面，从众多的Vue UI库中选中了Vant，Vant的整体UI设计和交互界面非常适合移动端电子商务商城构建。
​		（3）业务功能方面，参考了京东、淘宝等主流电子商务平台的排版与设计，一方面可以让项目的成品有着让大众各位熟悉的交互过程，另一方面也减少了本项目花在样式设计上的精力，从而把时间花在业务的开发和系统的优化上。通过详尽的系统设计，完成系统的基本功能开发。
​		（4）对系统的基本功能开发进行优化。首先是设备的适配，系统本身是设计适配移动端设备，Vant优秀的响应式适配让系统可以很方便的适配。从最低的320 * 568dp到较大的480 * 853dp均适配且到达想要的显示效果。性能优化方面，从减少加载时间和性能占用的角度出发，使用了图片懒加载，加入节流函数等让系统的性能得以进一步优化。
​		（5）对平台测试进行简单介绍，然后遍历平台的所有模块及所有组件，进行页面测试。最后得出，测试结果满足了系统设计需求。

### 6.2 展望

​		本文虽完成了既定的工作，但也有许多不完美的地方，故对该平台做出以下展望：
​		（1）由于工程化的构建前端工程让项目的结构更加细化，虽能让结构清晰，但也让项目为了添加一些简单的功能需要许多步骤才能完成，这是前端组件化的优势也是劣势。因此在有限的时间内，所设计的组件数量及功能有限，有待后期对作品进行迭代和优化。
​		（2）搜集用户的需求，在已有的平台是继续添加模块和功能，让平台扩展得更全面更强大，以满足更多的实际项目使用需求。
​		（3）跟进前端主流技术趋势，前端技术体系日新月异，今天的热门也许明天就将被摒弃，保持学习新的技术新的思想并运用到以后的更新迭代中，形成一个良好的循环。

## 参考文献

## 致谢

​	首先，我要特别感谢蒋合领老师，感谢他在校园学习生活中给予我的种种帮助。他不光传授给我知识，更传授给我令我终生受益的学习方法，在做人方面也给我做了很好的表率。值此毕业之际，我向蒋老师表示我最崇高的敬意与深深的感谢。
​	在我本科生的学习期间，感谢卿春、陈明、何家旭、张定义等老师的指导与帮助，让我没有虚度这宝贵的四年光阴。同时，谢谢我的同届同学及三位室友的支持与帮助，让我在获取知识的同时也收获了友谊。最后，在海康威视贵州业务中心实习期间，感谢同事们的技术指导与生活关怀，让我切实把所学知识运用到实际。
​	最后感谢百忙之中给我评阅论文的评审老师们，谢谢你们提出的宝贵意见与建议。